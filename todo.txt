

==============================
TRACKD - TODO LIST
==============================
Last Updated: December 13, 2025

==============================
PRIORITY 1 - CRITICAL (Security & Stability)
==============================

[ ] 1. Implement Rate Limiting
    - Install @nestjs/throttler package
    - Add ThrottlerModule to app.module.ts
    - Protect auth endpoints (login, register, sendOtp, forgetPassword)
    - Protect sensitive endpoints (follow, unfollow, movie operations)
    - Recommended: 5 requests/minute for OTP, 10 requests/minute for auth

[ ] 2. Remove Console.log Statements
    - Replace with proper logging service (Winston or NestJS Logger)
    - Remove all console.log from production code:
      * client/src/redux/user/userApi.ts (lines 63, 172)
      * client/src/redux/baseQuery.ts (lines 74, 159, 185, 194, 199, 202)
      * client/src/redux/auth/authSlice.ts (lines 42, 50, 58, 68, 82, 97)
      * client/src/hooks/useTokenRefreshOnLoad.ts (lines 43, 47, 74, 78)
      * server/src/modules/auth/auth.service.ts (lines 167, 175)
      * client/src/pages/DiscoverPage.tsx (lines ~30)
      * server/src/modules/movie/tmdb.service.ts (line 18)

[ ] 3. Fix Google OAuth Security Issues
    - Verify state parameter is properly validated in callback
    - Ensure refresh tokens are rotated on use
    - Add PKCE flow if possible for additional security
    - Validate redirect_uri matches configured value exactly
    - Add comprehensive error handling for OAuth failures

[ ] 4. Environment Variable Validation
    - Add validation for all env vars at startup (already started in main.ts)
    - Add TMDB_API_KEY and RESEND_API_KEY to required vars
    - Create proper .env.example files with all variables
    - Document minimum required permissions for each service

[ ] 5. Production Dockerfile & Deployment
    - Create production Dockerfiles (currently only .dev versions exist)
    - Optimize image sizes (multi-stage builds)
    - Add proper health check endpoints
    - Configure proper logging for containers
    - Set up CI/CD pipeline (GitHub Actions?)

==============================
PRIORITY 2 - HIGH (Features & UX)
==============================

[ ] 6. Email Service Improvements
    - Currently using Resend with hardcoded fallback email
    - Remove hardcoded fallback email for production
    - Add email template improvements (currently basic HTML)
    - Add retry logic for failed email sends
    - Consider queuing system for emails (Bull/BullMQ)

[ ] 7. Movie Rating & Review System
    - Add rating field to UserMovieEntry model
    - Create endpoints: POST /user-movies/:id/rate, POST /user-movies/:id/review
    - Add review text field (with character limit)
    - Display ratings and reviews on movie cards
    - Add average rating calculation

[ ] 8. Enhanced Friend Features
    - Add friend activity feed (recent movies watched)
    - Add mutual friends display
    - Implement friend recommendations
    - Add privacy settings (public/friends-only/private profile)
    - Show shared movies with friends

[ ] 9. Notification System
    - Real-time notifications for friend requests (WebSocket/SSE)
    - Email notifications for important events
    - Mark notifications as read
    - Notification preferences in settings
    - Show unread count in navbar

[ ] 10. Search & Discovery Improvements
    - Fix searchLocalised accuracy issues (TMDB API)
    - Add filters (genre, year, rating, language)
    - Add sort options (popularity, rating, release date)
    - Implement infinite scroll for search results
    - Add movie recommendations based on user's list

==============================
PRIORITY 3 - MEDIUM (Code Quality & Performance)
==============================

[ ] 11. Backend Code Refactoring
    - Extract common patterns into reusable functions
    - Improve error handling consistency across services
    - Add request/response interceptors for logging
    - Implement proper DTO validation messages
    - Add API documentation (Swagger/OpenAPI)

[ ] 12. Frontend Performance Optimizations
    - Implement code splitting for routes
    - Optimize bundle size (analyze with vite-bundle-visualizer)
    - Add React.lazy() for heavy components
    - Implement virtual scrolling for long lists
    - Add proper loading skeletons (replace generic "Loading...")

[ ] 13. Testing Infrastructure
    - Set up Jest for backend unit tests
    - Add e2e tests with Supertest
    - Set up Vitest for frontend
    - Add React Testing Library for component tests
    - Aim for >70% code coverage

[ ] 14. Database Optimizations
    - Add indexes for frequently queried fields (email, username, movieId)
    - Review N+1 query problems (use Prisma's include wisely)
    - Add database connection pooling configuration
    - Implement caching layer (Redis) for trending movies, user profiles
    - Add database backup strategy

[ ] 15. Error Handling Improvements
    - Standardize error response format across all endpoints
    - Add proper error codes (e.g., AUTH_001, MOVIE_002)
    - Improve frontend error messages (more user-friendly)
    - Add error boundary components in React
    - Implement retry logic for transient failures

==============================
PRIORITY 4 - LOW (Nice to Have)
==============================

[ ] 16. Advanced Movie Features
    - Add movie collections/custom lists (beyond watched/planned)
    - Add tags for movies (e.g., "favorites", "rewatchable")
    - Export/import movie list (CSV/JSON)
    - Add movie statistics dashboard
    - Integrate with other services (Letterboxd, IMDb)

[ ] 17. Social Features
    - Add comments on movies
    - Add movie discussion threads
    - Implement group watch lists
    - Add "recently watched by friends" section
    - Add movie recommendations from friends

[ ] 18. UI/UX Enhancements
    - Add dark mode support
    - Improve mobile responsiveness
    - Add animations and transitions
    - Implement keyboard shortcuts
    - Add accessibility improvements (ARIA labels, screen reader support)

[ ] 19. Analytics & Monitoring
    - Add application monitoring (Sentry for errors)
    - Implement user analytics (privacy-respecting)
    - Add performance monitoring (Web Vitals)
    - Create admin dashboard for statistics
    - Add API usage tracking

[ ] 20. Documentation
    - Complete API documentation
    - Add architecture diagrams
    - Create contributing guidelines
    - Add setup guides for different environments
    - Document deployment process

==============================
BUGS & TECHNICAL DEBT
==============================

[ ] Known Issues:
    - Google OAuth avatar URL not always displayed correctly
    - Friend request notifications don't auto-refresh
    - Movie search sometimes returns inaccurate results (TMDB regionalization)
    - Password reset token cleanup (expired tokens not removed)
    - Refresh token rotation not fully implemented

==============================
NOTES
==============================

- The project is well-structured with good separation of concerns
- Authentication flow is solid (JWT + HttpOnly cookies)
- Friend system is well-implemented
- CUID migration is complete
- Docker setup exists but needs production versions
- Email service switched from Nodemailer to Resend

Next immediate actions:
1. Implement rate limiting (security risk)
2. Remove console.log statements (clean code)
3. Create production Dockerfiles (deployment ready)
4. Add comprehensive testing
5. Implement movie ratings/reviews (user-requested feature)
